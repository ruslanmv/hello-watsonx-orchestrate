#!/usr/bin/env bash
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚                                                                            â”‚
# â”‚ â–ˆâ–ˆâ•—      â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—            â”‚
# â”‚ â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•            â”‚
# â”‚ â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ•”â•             â”‚
# â”‚ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—             â”‚
# â”‚ â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—            â”‚
# â”‚  â•šâ•â•â•â•šâ•â•â• â•šâ•â•  â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•â•šâ•â•  â•šâ•â•            â”‚
# â”‚                                                                            â”‚
# â”‚           watsonx Orchestrate   DEV EDITION   by ruslanmv.com              â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# Installs a chosen STABLE version of IBM watsonx Orchestrate ADK in an
# isolated Python virtual-environment (./venv) and starts the local
# Developer Edition server.
#
# If a ./venv directory already exists, installation is skipped.
#
# â”€â”€ ACCOUNT TYPES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#    1. watsonx Orchestrate account
#             Â· WO_INSTANCE + WO_API_KEY
#             Â· WO_DEVELOPER_EDITION_SOURCE=orchestrate
#    2. watsonx.ai account
#             Â· WO_ENTITLEMENT_KEY + WATSONX_APIKEY + WATSONX_SPACE_ID
#             Â· WO_DEVELOPER_EDITION_SOURCE=myibm
#
# Ensure an appropriate `.env` exists in this directory before running.
# ---------------------------------------------------------------------------

set -euo pipefail

# â”€â”€ Blue runtime logo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
print_logo() {
  local BLUE="\033[1;34m"; local NC="\033[0m"
  echo -e "${BLUE}"
  cat <<'EOF'
                _
               | |
 _ __ _  _ ___| | __ _ _ __  _ __ _____  __
| '__| | | / __| |/ _` | '_ \| '_ ` _ \ \ / /
| |  | |_| \__ \ | (_| | | | | | | | | \ V /
|_|   \__,_|___/_|\__,_|_| |_|_| |_| |_|\_/

EOF
  echo -e "${NC}"
}

print_logo

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Pre-flight: Verify Docker & Compose v2
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
command -v docker >/dev/null \
  || { echo "âŒ Docker not installed. Please install Docker first."; exit 1; }

if ! docker compose version 2>/dev/null | grep -q 'v2\.'; then
  echo "âŒ Docker Compose v2 missing. Please upgrade to Compose v2."; exit 1
fi

if ! command -v ifconfig >/dev/null; then
  echo "â„¹ï¸  'ifconfig' not found (package net-tools). IP auto-detect will fall back to other methods."
fi

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Config
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ADK_VERSIONS=( "1.5.0" "1.5.1" "1.6.0" "1.6.1" "1.6.2" )
ENV_FILE="./.env"
ADK_VERSION=""

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Load .env *before* anything else
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[[ -f "$ENV_FILE" ]] || { echo "âŒ .env not found"; exit 1; }
echo "ğŸ“„ Loading variables from $ENV_FILE"
set -a
# shellcheck disable=SC1090
source "$ENV_FILE"
set +a

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Detect account type
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if [[ "${WO_DEVELOPER_EDITION_SOURCE:-}" == "internal" ]] && \
   [[ -n "${DOCKER_IAM_KEY:-}" && -n "${WATSONX_APIKEY:-}" && -n "${WATSONX_SPACE_ID:-}" ]]; then

  ACCOUNT_TYPE="internal"

elif [[ "${WO_DEVELOPER_EDITION_SOURCE:-}" == "orchestrate" ]] && \
     [[ -n "${WO_INSTANCE:-}" && -n "${WO_API_KEY:-}" ]]; then

  ACCOUNT_TYPE="orchestrate"

elif [[ "${WO_DEVELOPER_EDITION_SOURCE:-}" == "myibm" ]] && \
     [[ -n "${WO_ENTITLEMENT_KEY:-}" && -n "${WO_INSTANCE:-}" && -n "${WO_API_KEY:-}" ]]; then

  ACCOUNT_TYPE="myibm"

elif [[ "${WO_DEVELOPER_EDITION_SOURCE:-}" == "watsonx.ai" ]] && \
     [[ -n "${WO_ENTITLEMENT_KEY:-}" && -n "${WATSONX_APIKEY:-}" && -n "${WATSONX_SPACE_ID:-}" ]]; then

  ACCOUNT_TYPE="watsonx.ai"

else
  cat <<EOF >&2
âŒ Could not detect a valid credential block in .env.
Define exactly one of:

  â€¢ internal:
//  WO_DEVELOPER_EDITION_SOURCE=internal
//  DOCKER_IAM_KEY=â€¦
//  WATSONX_APIKEY=â€¦
//  WATSONX_SPACE_ID=â€¦

  â€¢ orchestrate:
//  WO_DEVELOPER_EDITION_SOURCE=orchestrate
//  WO_INSTANCE=â€¦
//  WO_API_KEY=â€¦

  â€¢ myibm:
//  WO_DEVELOPER_EDITION_SOURCE=myibm
//  WO_ENTITLEMENT_KEY=â€¦
//  WO_INSTANCE=â€¦
//  WO_API_KEY=â€¦
//  [WO_DEVELOPER_EDITION_SKIP_LOGIN=true|false]

  â€¢ watsonx.ai:
//  WO_DEVELOPER_EDITION_SOURCE=watsonx.ai
//  WO_ENTITLEMENT_KEY=â€¦
//  WATSONX_APIKEY=â€¦
//  WATSONX_SPACE_ID=â€¦
EOF
  exit 1
fi

echo "ğŸ” Detected account type: $ACCOUNT_TYPE"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Validate only that credential block (extra keys are ignored)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
case "$ACCOUNT_TYPE" in
  internal)
    for V in WO_DEVELOPER_EDITION_SOURCE DOCKER_IAM_KEY WATSONX_APIKEY WATSONX_SPACE_ID; do
      [[ -n "${!V:-}" ]] || { echo "âŒ $V missing for internal mode."; exit 1; }
    done
    ;;
  orchestrate)
    for V in WO_DEVELOPER_EDITION_SOURCE WO_INSTANCE WO_API_KEY; do
      [[ -n "${!V:-}" ]] || { echo "âŒ $V missing for orchestrate mode."; exit 1; }
    done
    ;;
  myibm)
    for V in WO_DEVELOPER_EDITION_SOURCE WO_ENTITLEMENT_KEY WO_INSTANCE WO_API_KEY; do
      [[ -n "${!V:-}" ]] || { echo "âŒ $V missing for myibm mode."; exit 1; }
    done
    # default skip-login to false
    WO_DEVELOPER_EDITION_SKIP_LOGIN="${WO_DEVELOPER_EDITION_SKIP_LOGIN:-false}"
    ;;
  watsonx.ai)
    for V in WO_DEVELOPER_EDITION_SOURCE WO_ENTITLEMENT_KEY WATSONX_APIKEY WATSONX_SPACE_ID; do
      [[ -n "${!V:-}" ]] || { echo "âŒ $V missing for watsonx.ai mode."; exit 1; }
    done
    ;;
esac

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  IBM Cloud / Docker login (skip in internal; optional skip in myibm)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if [[ "$ACCOUNT_TYPE" == "internal" ]]; then

  echo "ğŸ” internal mode: please ensure Docker is logged in manually if needed:"
  echo "      docker login -u iamapikey -p \$DOCKER_IAM_KEY registry.us-south.watson-orchestrate.cloud.ibm.com"

elif [[ "$ACCOUNT_TYPE" == "myibm" && "$WO_DEVELOPER_EDITION_SKIP_LOGIN" == "true" ]]; then

  echo "ğŸ” myibm mode with WO_DEVELOPER_EDITION_SKIP_LOGIN=true â†’ skipping registry login"

else
  # for orchestrate, myibm (skip_login=false), watsonx.ai:
  if ! command -v ibmcloud >/dev/null; then
    echo "âš ï¸  ibmcloud CLI not found; please install it to auto-login." >&2
  else
    # determine region for CLI login
    REGION="us-south"
    [[ "$ACCOUNT_TYPE" == "orchestrate" || "$ACCOUNT_TYPE" == "myibm" ]] \
      && REGION=$(echo "$WO_INSTANCE" | cut -d. -f2)

    echo "ğŸ” Logging into IBM Cloud (region: $REGION)â€¦"
    ibmcloud login --apikey "${WO_API_KEY:-$WO_ENTITLEMENT_KEY}" -r "$REGION"

    echo "ğŸ” Logging Docker into IBM Container Registryâ€¦"
    ibmcloud cr login
  fi
fi

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Setup Python venv & ADK
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if [[ -d "venv" ]]; then
  echo "ğŸ“¦ Activating existing venvâ€¦"
  # shellcheck disable=SC1091
  source venv/bin/activate
  echo "ğŸ”§ Python $(python --version)"
  ADK_VERSION=$(pip show ibm-watsonx-orchestrate 2>/dev/null \
                 | awk '/^Version:/{print $2}')
  [[ -z "$ADK_VERSION" ]] && echo "âš ï¸  Could not detect ADK version."
else
  echo "ğŸ“¦ Creating venv in ./venvâ€¦"
  python3.11 -m venv venv
  # shellcheck disable=SC1091
  source venv/bin/activate
  echo "ğŸ”§ Python $(python --version)"

  echo; echo "Available ADK versions:"
  for i in "${!ADK_VERSIONS[@]}"; do
    printf "   %2d) %s\n" $((i+1)) "${ADK_VERSIONS[$i]}"
  done
  read -rp "Select ADK version number: " IDX
  [[ "$IDX" =~ ^[0-9]+$ && "$IDX" -ge 1 && "$IDX" -le "${#ADK_VERSIONS[@]}" ]] \
    || { echo "âŒ Invalid version."; exit 1; }
  ADK_VERSION="${ADK_VERSIONS[$((IDX-1))]}"
  echo "ğŸ“¦ Installing ibm-watsonx-orchestrate==$ADK_VERSION â€¦"
  pip install --quiet --upgrade "ibm-watsonx-orchestrate==$ADK_VERSION"
fi

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Fix non-TTY for the â€œI acceptâ€ prompt
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export COMPOSE_INTERACTIVE_NO_CLI=1

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Run Developer Edition
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if [[ "$ACCOUNT_TYPE" == "internal" ]]; then

  echo
  echo "ğŸš€ (internal) Starting Developer Editionâ€¦"
  orchestrate server start -l --env-file "$ENV_FILE"
  echo
  echo "ğŸ’¬ Launching chatâ€¦"
  orchestrate chat start
  echo
  read -rp "Press [Enter] to exitâ€¦"
  exit 0

else
  echo
  echo "â™»ï¸  Resetting any previous Developer Editionâ€¦"
  echo "I accept" | orchestrate server reset --env-file "$ENV_FILE" || true

  echo
  echo "ğŸš€ Starting Developer Editionâ€¦"
  echo "I accept" | orchestrate server start --env-file "$ENV_FILE"

  echo
  echo "ğŸ”„ Activating local environmentâ€¦"
  orchestrate env activate local
fi

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  Done
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
echo
if [[ -n "$ADK_VERSION" ]]; then
  echo "âœ…  Developer Edition v$ADK_VERSION is live (venv activated)."
else
  echo "âœ…  Developer Edition is live (venv activated)."
fi
echo "    Happy building â€” ruslanmv.com ğŸš€"